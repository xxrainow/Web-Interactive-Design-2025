<!DOCTYPE html>
<html lang="ko">
  <head>
    <script>
  (function(d) {
    var config = {
      kitId: 'wxq3dyk',
      scriptTimeout: 3000,
      async: true
    },
    h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/\bwf-loading\b/g,"")+" wf-inactive";},config.scriptTimeout),tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;h.className+=" wf-loading";tk.src='https://use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)
  })(document);
</script>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Happy Birthday</title>
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Fredoka+One&display=swap');

      /* --- ê¸°ë³¸ ë°°ê²½ ë° ì •ë ¬ --- */
      body {
        justify-content: center;
        align-items: center;
        width: 100vw;
        height: 100vh;
        margin: 0;
        background-color: #fff7f9;
        overflow: hidden;
        font-family: "timeline-210", sans-serif;
      }

      section {
        width: 100vw;
        height: 100vh;
        display: none;
        justify-content: center;
        align-items: center;
        background: linear-gradient(to bottom, #ffd2e1, #cfe7ff);
        transition: opacity 0.8s ease;
        opacity: 0;
      }

      section.active {
        display: flex;
        flex-direction: column;
        opacity: 1;
      }

      section h1 {
        font-size: 5rem;
        color: #ff4274;
        margin-bottom: 30px;
      }

      button {
        margin-top: 30px;
        padding: 15px 30px;
        border: none;
        border-radius: 40px;
        background-color: #ff80a4;
        color: white;
        font-family: "timeline-210", sans-serif;
        font-size: 1.5rem;
        cursor: pointer;
        transition: 0.3s;
      }

      button:hover {
        background-color: #ff5b87;
      }

      /* --- í¸ì§€ ì „ì²´ ì»¨í…Œì´ë„ˆ --- */
      .letter-container {
        position: relative;
        width: 600px;
        height: 400px;
        cursor: pointer;
        /* ëª¨ë°”ì¼ì—ì„œë„ ë¶€ë“œëŸ¬ìš´ ì• ë‹ˆë©”ì´ì…˜ì„ ìœ„í•œ ì„¤ì • */
        -webkit-transform: translateZ(0);
        transform: translateZ(0);
        transform: translateY(200px); /* 80px ì•„ë˜ë¡œ ì´ë™ */
      }

      /* --- ê³µí†µ ì´ë¯¸ì§€ ë ˆì´ì–´ --- */
      .envelope-front,
      .envelope-back,
      .flap,
      .letter {
        position: absolute;
        width: 100%;
        height: 100%;
        object-fit: contain;
        transition: all 0.5s ease-in-out;
      }

      .envelope-back {
        z-index: 1;
        top: -100px;
      }

      .letter {
        z-index: 2;
        /* ì´ˆê¸° ìƒíƒœ: ë´‰íˆ¬ ì•„ë˜ìª½ì— ì™„ì „íˆ ìˆ¨ê²¨ì ¸ ìˆìŒ */
        transform: translateY(-20px) scale(1.2);
        transition-delay: 0s; /* ë®ê°œê°€ ì—´ë¦° í›„ í¸ì§€ê°€ ì˜¬ë¼ì˜¤ë„ë¡ ì§€ì—° */
      }

      .envelope-front {
        z-index: 5;
        top: 0;
      }

      /* --- ë®ê°œ (ì—´ë¦¬ëŠ” ë¶€ë¶„) --- */
      .flap {
        z-index: 6;
        top: 0;
        /* ë®ê°œê°€ ìœ„ìª½ì„ ê¸°ì¤€ìœ¼ë¡œ íšŒì „í•˜ë„ë¡ ì„¤ì • */
        transform-origin: top;
        transform: translateY(-90px);
        transition-delay: 0s;
      }

      /* ìœ—ë¶€ë¶„ ê°€ë¦¬ëŠ” ë§ˆìŠ¤í¬ */
      .paper-clip {
        position: absolute;
        inset: 0; /* ì»¨í…Œì´ë„ˆì™€ ê°™ì€ í¬ê¸° */
        /* ì•ë©´(envelope-front: 4)ë³´ë‹¤ ì•„ë˜, í¸ì§€ì§€(2)ë³´ë‹¤ëŠ” ìœ„ */
        z-index: 3;
        /* ìœ—ë¶€ë¶„ì„ ì˜ë¼ì„œ ë´‰íˆ¬ ë°”ê¹¥ìœ¼ë¡œ íŠ€ì–´ë‚˜ì˜¨ í¸ì§€ì§€ë¥¼ ìˆ¨ê¹€ */
        clip-path: inset(0px 0 80px 0);
        -webkit-clip-path: inset(0px 0 80px 0);
        transition: clip-path 0.45s ease, -webkit-clip-path 0.45s ease;
        pointer-events: none;
      }
      .paper-clip .letter,
      .paper-clip .letter-text {
        position: absolute;
        inset: 0;
      }

      /* --- ë‚ ì§œ --- */
      .today {
        color: #555;
        position: absolute;
        bottom: 6%;
        left: 50%;
        transform: translateX(-50%);
        font-weight: 600;
      }

      /* --- í¸ì§€ì§€ ìœ„ í…ìŠ¤íŠ¸ --- */
      .letter-text2 .next-button {
        font-size: 0.9rem;   /* ê¸€ì í¬ê¸°ë§Œ ì‚´ì§ ì¶•ì†Œ */
        padding: 6px 12px;   /* ë²„íŠ¼ ì—¬ë°± ì¶•ì†Œ */
        border-radius: 12px; /* ì„ íƒ ì‚¬í•­: ëª¨ì„œë¦¬ ì‚´ì§ë§Œ ë‘¥ê¸€ê²Œ */
      }
      .letter-text,
      .letter-text2 {
        opacity: 0;
        position: absolute;
        top: 50%; /* í¸ì§€ì§€ ì¤‘ì•™ ê¸°ì¤€ìœ¼ë¡œ ìœ„ì¹˜ */
        left: 50%;
        transform: translate(-140px, -220px);
        z-index: 7;
        text-align: center;
        color: #222;
        font-family: "timeline-210", sans-serif;
        line-height: 1.6;
        pointer-events: none; /* í´ë¦­ ì´ë²¤íŠ¸ê°€ ë´‰íˆ¬ì— ê°€ë„ë¡ */
        transition: opacity 0.5s ease-in-out;
      }

      .letter-text h2,
      .letter-text2 h2 {
        font-size: 1.8rem;
        margin: 0;
      }

      .letter-text p {
        margin: 0; /* ê¸°ë³¸ ì—¬ë°± 0 */
        line-height: 0.9; /* 1 ~ 1.15 ì‚¬ì´ë¡œ ì¡°ì ˆí•´ê°€ë©° í…ŒìŠ¤íŠ¸ */
      }

      .detail-link {
        display: inline-block;
        margin-top: 8px;
        font-size: 0.9rem;
        text-decoration: none;
        color: #6a6a6a;
        font-weight: 500;
        text-decoration: underline;           
        pointer-events: auto; /* ë§í¬ í´ë¦­ ê°€ëŠ¥ */
      }


      /* --- ìƒíƒœë³„ ë…¸ì¶œ ê·œì¹™ --- */
      .letter-container.open .letter-text {
        opacity: 1;
        pointer-events: auto;
        transition-delay: 0.2s; /* ë®ê°œ ì• ë‹ˆë©”ì´ì…˜ ë’¤ì— ë‚˜íƒ€ë‚˜ê²Œ í•˜ê³  ì‹¶ë‹¤ë©´ ì§€ì—° letter-textì— trainsitionì´ ì •ì˜ë˜ì–´ì•¼ ì ìš©ë¨ */
      }
      .letter-container.detail .letter-text {
        opacity: 0;
        pointer-events: none;
        transition-delay: 0.1s; /* í¸ì§€ ì´ë™ í›„ ë‚˜íƒ€ë‚˜ë„ë¡ ì§€ì—° */
      } /* ìì„¸íˆ ë³´ê¸° í›„ ê¸°ì¡´ í…ìŠ¤íŠ¸ ìˆ¨ê¹€ */
      .letter-container.open .flap {
        /* ë®ê°œê°€ ìœ„ë¡œ 180ë„ íšŒì „í•˜ë©° ì—´ë¦¼ */
        transform: rotateX(180deg);
        opacity: 0;
        transition-delay: 0s;
        pointer-events: none;
      }
      .letter-container.open .letter {
        /* í¸ì§€ì§€ê°€ ì œìë¦¬(ìœ„)ë¡œ ì˜¬ë¼ì˜´ */
        transform: translateY(-50px) scale(1.2);
        transition-delay: 0.2s;
      }
      .letter-container.lift .letter {
        transform: translateY(-250px) scale(1.2); /* ê¸°ì¡´ -150pxë³´ë‹¤ ë” ìœ„ë¡œ */
        transition-delay: 0.2s;
        pointer-events: none;
      }
      .letter-container.open .paper-clip,
      .letter-container.lift .paper-clip {
        z-index: 4;
        clip-path: inset(-300px 0 80px 0);
        -webkit-clip-path: inset(-300px 0 80px 0);
        transition: clip-path 0.45s ease, -webkit-clip-path 0.45s ease;
        transition-delay: 0.3s;
      }
       .letter-container.lift .letter-text {
        opacity: 0;
        pointer-events: none;
        transition-delay: 0s; /* í¸ì§€ ì´ë™ í›„ ë‚˜íƒ€ë‚˜ë„ë¡ ì§€ì—° */
      }
      .letter-container.lift .letter-text2 {
        opacity: 1;
        pointer-events: auto;
        transform: translate(-150px, -400px); /* ìœ„ë¡œ ì´ë™ */
        transition-delay: 0.2s; /* í¸ì§€ ì´ë™ í›„ ë‚˜íƒ€ë‚˜ë„ë¡ ì§€ì—° */
      } /* ìƒˆ í…ìŠ¤íŠ¸ í‘œì‹œ */

      
      /* ë‹«íˆëŠ” ì¤‘/ì• ë‹ˆë©”ì´ì…˜ ì¤‘: ì¦‰ì‹œ ìˆ¨ê¹€(ì§€ì—° ë¬´ì‹œ) */
      .letter-container.closing .letter-text,
      .letter-container.closing .letter-text2,
      .letter-container.animating .letter-text,
      .letter-container.animating .letter-text2 {
        opacity: 0 !important;
        pointer-events: none !important;
        transition: none !important;
        transition-delay: 0s !important;
      }
  
      
      .detail-link:hover {
        text-decoration: underline;
      }

      /* í¼ & ë‹¤ìŒ ë²„íŠ¼(ê°„ë‹¨ í¬ê¸° ì¶•ì†Œ) */
      .letter-text2 .next-button {
        font-size: 0.9rem;
        padding: 6px 12px;
        border-radius: 12px;
        border: none;
        background: #ff80a4;
        color: #fff;
        cursor: pointer;
      }

      .bgm-toggle {
        position: fixed;
        right: 20px;
        top: 0px;
        z-index: 99;
        padding: 10px 14px;
        border: none;
        border-radius: 999px;
        background: #222;
        color: #fff;
        font-size: 0.95rem;
        cursor: pointer;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      }
      .bgm-toggle:hover {
        filter: brightness(1.1);
      }
    </style>
  </head>
  <body>
    <button
        id="bgmToggle"
        class="bgm-toggle"
        aria-pressed="false"
        type="button"
      >
        ğŸ”‡ BGM ì¼œê¸°
      </button>

    <!--  ë°°ê²½ ìŒì•… -->
    <audio id="startbgm" preload="auto" loop>
      <source src="bgm/start.mp3" type="audio/mp3" />
    </audio>

    <!-- 1ï¸âƒ£ ì¸íŠ¸ë¡œ í™”ë©´ -->
    <section id="screen1" class="active">
      <h1>ë‚˜í™€ë¡œ ìƒì¼ì„ ë³´ë‚´ëŠ” ë°©ë²•</h1>
      <button onclick="nextScreen()">ì‹œì‘í•˜ê¸°</button>
    </section>

    <section id="screen2">
      <div class="letter-container">
        <img
          src="test/backenvelope.png"
          alt="í¸ì§€ ë´‰íˆ¬ ë’·ë©´"
          class="envelope-back"
        />
        <div class="paper-clip">
          <img src="test/letter.png" alt="í¸ì§€ì§€" class="letter" />
        </div>

        <!-- ğŸ“ í¸ì§€ ìœ„ì— ì–¹ì„ ê¸€ì”¨ -->
        <div class="letter-text">
          <h2>Happy Birthday To...</h2>
          <p><br /></p>
          <p>.</p>
          <p>.</p>
          <p>.</p>
          <p><br /></p>
          <a href="#" class="detail-link">ìì„¸íˆ ë³´ê¸°</a>
        </div>

        <div class="letter-text2">
          <h2>Happy Birthday!</h2>
          <p>ë‹¹ì‹ ë§Œì„ ìœ„í•œ <br> ì‘ì€ íŒŒí‹°ì— ì´ˆëŒ€í•©ë‹ˆë‹¤</p>
          <p><br /></p>
          <p>ë‹¹ì‹ ì˜ ì´ë¦„ê³¼ ë‚˜ì´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”</p>
          <form id="invite-form" class="invite-form" autocomplete="off">
            <label class="field">
            <span class="label">ì´ë¦„</span>
            <input id="nameInput" type="text" name="name" placeholder="í™ê¸¸ë™" required />
            </label>

            <label class="field">
            <span class="label">ë‚˜ì´</span>
              <input id="ageInput" type="number" name="age" min="1" max="120" inputmode="numeric" placeholder="24" required />
            </label>

          <button type="submit" class="next-button">âœ</button>
          
        </div>

        <img
          src="test/envelope.png"
          alt="í¸ì§€ ë´‰íˆ¬ ì•ë©´"
          class="envelope-front"
        />
        <img src="test/heartflap.png" alt="í¸ì§€ ë´‰íˆ¬ ë®ê°œ" class="flap" />
      </div>
      <div id="today" class="today"></div>
    </section>

    <script>
      let current = 1; // í˜„ì¬ í™”ë©´ ë²ˆí˜¸

      // í™”ë©´ ì „í™˜ í•¨ìˆ˜
      function nextScreen() {
        const now = document.getElementById(`screen${current}`);
        const next = document.getElementById(`screen${current + 1}`);

        if (!next) return; // ë‹¤ìŒ í™”ë©´ì´ ì—†ìœ¼ë©´ ì¢…ë£Œ
        now.classList.remove('active');
        next.classList.add('active');
        current++;
      }

      // ë‚ ì§œ í‘œê¸°
      (function () {
        const t = new Date();
        const yyyy = t.getFullYear();
        const mm = String(t.getMonth() + 1).padStart(2, '0');
        const dd = String(t.getDate()).padStart(2, '0');
        document.getElementById('today').textContent = `TODAY ${yyyy}-${mm}-${dd}`;
      })();
      
      // BGM ì œì–´
      const startbgm = document.getElementById('startbgm');
      // ì‚¬ìš©ìê°€ í´ë¦­í•˜ê±°ë‚˜ ìŠ¤í¬ë¡¤ ë“± ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ë©´ ìŒì•… ì¬ìƒ
      function tryPlayBgm() {
        startbgm.play().catch(() => {}); // ì •ì±…ìœ¼ë¡œ ë§‰íˆë©´ ì¡°ìš©íˆ ë¬´ì‹œ
        document.removeEventListener('click', tryPlayBgm);
      }
      document.addEventListener('click', tryPlayBgm, { once: true });
      // BGM ON/OFF
      const bgmToggle = document.getElementById('bgmToggle');
      function updateBgmUI() {
        const playing = !startbgm.paused && !startbgm.ended;
        bgmToggle.textContent = playing ? 'ğŸ”Š BGM ë„ê¸°' : 'ğŸ”‡ BGM ì¼œê¸°';
        bgmToggle.setAttribute('aria-pressed', String(playing));
      }

      bgmToggle.addEventListener('click', (e) => {
        e.preventDefault();
        e.stopPropagation(); // í¸ì§€(ì»¨í…Œì´ë„ˆ) í´ë¦­ í† ê¸€ê³¼ ì¶©ëŒ ë°©ì§€

        if (startbgm.paused) {
          // ì‚¬ìš©ì ìƒí˜¸ì‘ìš©ìœ¼ë¡œ ì¬ìƒ ì‹œë„
          startbgm.play().catch(() => {
            // ì¬ìƒ ì‹¤íŒ¨(ë¸Œë¼ìš°ì € ì •ì±… ë“±) ì‹œ UIë§Œ ì¼ì¹˜ ìœ ì§€
          });
        } else {
          startbgm.pause();
        }
        updateBgmUI();
      });
      // ì¬ìƒ/ì¼ì‹œì •ì§€ ì´ë²¤íŠ¸ì— ë”°ë¼ ë¼ë²¨ ìë™ ë™ê¸°í™”
      startbgm.addEventListener('play', updateBgmUI);
      startbgm.addEventListener('pause', updateBgmUI);
      updateBgmUI();


      // HTMLì—ì„œ classê°€ 'letter-container'ì¸ ìš”ì†Œë¥¼ ì°¾ìŒ
      const letterContainer = document.querySelector('.letter-container');
      const flap = letterContainer.querySelector('.flap');
      const screen2 = document.getElementById('screen2');

      function toggleEnvelope() {
        letterContainer.classList.add('animating'); // í…ìŠ¤íŠ¸ ê¹œë¹¡ì„ ë°©ì§€
        if (letterContainer.classList.contains('open')) {
          letterContainer.classList.remove('open', 'lift', 'detail'); // ì¼ë‹¨ í¸ì§€ ë‹«ê¸°
          flap.style.transitionDelay = '0.1s'; // ë®ê°œ ëŠ¦ê²Œ ë‹«íˆê²Œ
          setTimeout(() => {
            flap.style.transitionDelay = '0s'; // ë‹¤ìŒ ì—´ë¦¼ ëŒ€ë¹„ ì›ë³µ
          }, 1500);
        } else {
          // ì—´ë¦¬ëŠ” ê²½ìš°: ë®ê°œ ë¨¼ì € ì—´ê¸°
          letterContainer.classList.add('open');
        }
      };

      // ë´‰íˆ¬(ì•/ë’¤/ë®ê°œ)ì—ë§Œ í´ë¦­ í† ê¸€
      document.querySelectorAll('.envelope-front, .envelope-back, .flap')
        .forEach(el => el.addEventListener('click', (e) => {
          e.stopPropagation();
          toggleEnvelope();
        }));

      // â€œìì„¸íˆ ë³´ê¸°â€ â†’ ìœ„ë¡œ ì˜¬ë¦¬ê³  ë‘ ë²ˆì§¸ í…ìŠ¤íŠ¸ í‘œì‹œ
      const detailLink = document.querySelector('.detail-link');
      detailLink.addEventListener('click', (e) => {
        e.preventDefault();
        e.stopPropagation();
        letterContainer.classList.add('lift');
      });

      // ë‚´ë¶€ ì¸í„°ë™ì…˜ì€ ë²„ë¸” ì°¨ë‹¨ (ë‹«íˆì§€ ì•Šë„ë¡)
      const inviteForm = document.getElementById('invite-form');
      inviteForm.addEventListener('click', (e) => e.stopPropagation());

      // í¼ ì œì¶œ ì‹œ index2.htmlë¡œ ë°ì´í„° ì „ì†¡
      inviteForm.addEventListener('submit', (e) => {
        e.preventDefault();
        e.stopPropagation();

        // 1. ì…ë ¥ ê°’ ê°€ì ¸ì˜¤ê¸°
      const nameInput = document.getElementById('nameInput');
      const ageInput = document.getElementById('ageInput');

      const name = nameInput.value;
      const age = ageInput.value;

      // 2. URL ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ìƒì„± (ì˜ˆ: ?name=í™ê¸¸ë™&age=24)
      const queryString = `?name=${encodeURIComponent(name)}&age=${encodeURIComponent(age)}`;
      // 3. í™”ë©´ í˜ì´ë“œ ì•„ì›ƒ ì‹œì‘ 
      // section.activeì— ì •ì˜ëœ transition: opacity 0.8s ease;ë¥¼ í™œìš©í•©ë‹ˆë‹¤.
      screen2.style.transition = 'opacity 0.5s ease';
      screen2.style.opacity = '0'; // íˆ¬ëª…í•˜ê²Œ ë§Œë“¦ (í™”ë©´ ì–´ë‘ì›Œì§)
    
      // 3. í˜ì´ì§€ ì´ë™
      setTimeout(() => {
        window.location.href = `index2.html${queryString}`;
        }, 800); // 1ì´ˆ ëŒ€ê¸°
      });
      
      // ì• ë‹ˆë©”ì´ì…˜ ëë‚˜ë©´ animating í•´ì œ
      flap.addEventListener('transitionend', (e) => {
        if (e.propertyName === 'transform') {
          letterContainer.classList.remove('animating');
        }
      });
    </script>
  </body>
</html>
