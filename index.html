<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>버스탈까? 걸어갈까? (심플)</title>
    <style>
      * {
        box-sizing: border-box;
      }
      body {
        font-family: system-ui, -apple-system, Segoe UI, Roboto,
          'Apple SD Gothic Neo', 'Malgun Gothic', sans-serif;
        margin: 0;
        background: #f6f7f9;
        color: #1b2733;
      }
      .wrap {
        max-width: 720px;
        margin: 40px auto;
        padding: 16px;
      }
      h1 {
        font-size: 22px;
        margin: 0 0 12px;
      }
      .box {
        background: #fff;
        border: 1px solid #d9e0ea;
        border-radius: 12px;
        padding: 16px;
      }
      .grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 12px 16px;
      }
      @media (max-width: 640px) {
        .grid {
          grid-template-columns: 1fr;
        }
      }
      .field {
        display: flex;
        flex-direction: column;
      }
      .field--full {
        grid-column: 1 / -1;
      }
      label {
        font-size: 14px;
        color: #5c6a79;
        margin: 4px 0 6px;
      }
      input {
        width: 100%;
        padding: 10px 12px;
        border: 1px solid #cfd6df;
        border-radius: 10px;
        font-size: 16px;
        background: #fff;
        color: #1b2733;
        line-height: 1.35;
      }
      input:focus {
        outline: none;
        border-color: #aeb9c7;
      }
      /* number 스피너 제거 (브라우저별) */
      input[type='number']::-webkit-outer-spin-button,
      input[type='number']::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }
      input[type='number'] {
        -moz-appearance: textfield;
      }
      .row {
        display: flex;
        gap: 8px;
      }
      button {
        padding: 10px 14px;
        border: 1px solid #cfd6df;
        background: #eef2f6;
        border-radius: 10px;
        cursor: pointer;
      }
      #out {
        margin-top: 4px;
        padding: 12px;
        border: 1px dashed #cfd6df;
        border-radius: 10px;
        background: #f3f6fa;
        min-height: 44px;
        white-space: pre-line;
      }
      .muted {
        color: #6b7683;
        font-size: 13px;
      }
    </style>
  </head>
  <body>
    <div class="wrap">
      <h1>버스탈까? 걸어갈까?</h1>
      <div class="box">
        <div class="grid">
          <div class="field">
            <label for="walkAll">목적지까지 도보 시간 (분)</label>
            <input id="walkAll" type="number" min="1" placeholder="예: 22" />
          </div>
          <div class="field">
            <label for="toStop">정류장까지 걷는 시간 (분)</label>
            <input id="toStop" type="number" min="0" placeholder="예: 5" />
          </div>
          <div class="field">
            <label for="headway">버스 배차 간격 (분)</label>
            <input id="headway" type="number" min="1" placeholder="예: 10" />
          </div>
          <div class="field">
            <label for="ride">버스 탑승 소요 (분)</label>
            <input id="ride" type="number" min="1" placeholder="예: 12" />
          </div>
          <div class="field field--full">
            <label for="nextBus">다음 버스까지 남은 시간 (분, 선택)</label>
            <input
              id="nextBus"
              type="number"
              min="0"
              placeholder="예: 3 (모르면 비워두기)"
            />
          </div>
          <div class="field field--full">
            <div class="row">
              <button id="calc">계산하기</button>
              <button id="reset">초기화</button>
            </div>
          </div>
          <div class="field field--full">
            <div id="out">
              <span class="muted"
                >값을 입력하고 <b>계산하기</b>를 눌러주세요.</span
              >
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      function fmt(n) {
        return Number.isFinite(n) ? Math.round(n) : '-';
      }
      function waitTime(toStop, headway, nextBus) {
        if (Number.isFinite(nextBus)) {
          if (nextBus >= toStop) return nextBus - toStop;
          var lag = (toStop - nextBus) % headway;
          return lag === 0 ? 0 : headway - lag;
        }
        return headway / 2;
      }
      function calc() {
        var walkAll = +document.getElementById('walkAll').value;
        var toStop = +document.getElementById('toStop').value;
        var headway = +document.getElementById('headway').value;
        var ride = +document.getElementById('ride').value;
        var nextVal = document.getElementById('nextBus').value;
        var nextBus = nextVal === '' ? NaN : +nextVal;
        var out = document.getElementById('out');

        if (
          ![walkAll, toStop, headway, ride].every(Number.isFinite) ||
          walkAll <= 0 ||
          toStop < 0 ||
          headway <= 0 ||
          ride <= 0
        ) {
          out.textContent =
            '입력을 확인하세요. (도보/배차/탑승 시간은 0보다 커야 합니다.)';
          return;
        }
        if (nextVal !== '' && (!Number.isFinite(nextBus) || nextBus < 0)) {
          out.textContent = '다음 버스까지 남은 시간은 0 이상이어야 합니다.';
          return;
        }

        var wait = waitTime(toStop, headway, nextBus);
        var etaBus = toStop + wait + ride;
        var etaWalk = walkAll;

        var msg =
          '버스 ETA: ' +
          fmt(etaBus) +
          '분 (대기 ' +
          fmt(wait) +
          '분 포함)\n' +
          '도보 ETA: ' +
          fmt(etaWalk) +
          '분\n';
        if (etaBus < etaWalk)
          msg +=
            '추천: 버스가 더 빨라요 (약 ' + fmt(etaWalk - etaBus) + '분 이득)';
        else if (etaBus > etaWalk)
          msg +=
            '추천: 걷는 게 더 빨라요 (약 ' + fmt(etaBus - etaWalk) + '분 이득)';
        else msg += '추천: 둘이 거의 비슷해요';

        out.textContent = msg;
      }
      function reset() {
        ['walkAll', 'toStop', 'headway', 'ride', 'nextBus'].forEach(function (
          id
        ) {
          var el = document.getElementById(id);
          if (el) el.value = '';
        });
        document.getElementById('out').innerHTML =
          '<span class="muted">값을 입력하고 <b>계산하기</b>를 눌러주세요.</span>';
      }
      document.getElementById('calc').addEventListener('click', calc);
      document.getElementById('reset').addEventListener('click', reset);
      ['walkAll', 'toStop', 'headway', 'ride', 'nextBus'].forEach(function (
        id
      ) {
        var el = document.getElementById(id);
        el.addEventListener('keydown', function (e) {
          if (e.key === 'Enter') calc();
        });
      });
    </script>
  </body>
</html>
